
{% extends 'base.html.twig' %}

{% block title %}CA Tree via API {% endblock %}


{% block javascripts %}
{{ parent() }}
{{ encore_entry_script_tags('ca-list-tree-api') }}
{% endblock %}

{% block body %}

    <h1>CA Lists</h1>
    {% set apiUrl  = 'https://127.0.0.1:8001/api' %}
{#    {% set apiUrl  = 'https://ac.wip:8001/api' %}#}

    <div id="js-ca-list" data-api-base="{{ apiUrl }}">

        CA List here...
    </div>

{% endblock %}

{% block tree %}
    {# ... box widget with defaults ... #}
    {% embed '@SurvosBase/Widgets/box-widget.html.twig' %}

        {% import '@SurvosBase/Macros/buttons.html.twig'  as btn %}
        {% block box_title %}Location API{% endblock %}
        {% block box_body %}
            <div class="callout callout-info">
                <div id="location_manager" class="js-demo"
                     data-api-base="{{ apiUrl }}"
                     data-building-id="{{ building.id }}"
                >
                </div>

                <a target="_blank" href="{{ apiUrl }}">
                    {{ apiUrl }}
                </a>
                {{ building.id }}
                {{ building.name }}

            </div>
        {% endblock %}

        {% block box_footer %}
            <div class="pull-right">
                    <span id="config"
                          data-save-url="{{ path('app_tree_save') }}"
                          data-api-url="{{ apiUrl }}"
                    ></span>

                {{ btn.link_button('api_locations_get_collection',apiUrl) }}
            </div>
        {% endblock %}
    {% endembed %}

{% endblock %}

{% block basic_ajax %}
    Need to enable basic-ajax.js
<div class="container" id="content">
    <div class="row page" id="demo">
        <div class="col-md-12">
            <h3>API Platform AJAX demo</h3>
            <div class="row">
                <div class="col-md-4 col-sm-8 col-xs-8">
                    <button type="button" class="btn btn-success btn-sm js-create" ><i class="glyphicon glyphicon-asterisk"></i> Create</button>
                    <button type="button" class="btn btn-warning btn-sm js-rename" ><i class="glyphicon glyphicon-pencil"></i> Rename</button>
                    <button type="button" class="btn btn-danger btn-sm js-delete" ><i class="glyphicon glyphicon-remove"></i> Delete</button>

                    <button id="js_save_button" type="button" class="btn btn-primary btn-sm"><i class="fas fa-upload"></i> Save</button>
                </div>
                <div class="col-md-2 col-sm-4 col-xs-4" style="text-align:right;">
                    <label for="demo_q"></label><input type="text" value="" style="box-shadow:inset 0 0 4px #eee; width:120px; margin:0; padding:6px 12px; border-radius:4px; border:1px solid silver; font-size:1.1em;" id="demo_q" placeholder="Search" />
                </div>
            </div>

        </div>
    </div>
</div>

{% endblock %}
